<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reviews - Fitzy Fitness</title>
    <link rel="stylesheet" href="styles/review.css" />
  </head>
  <body>
    <header>
      <h1>Fitzy <span>Fitness</span></h1>
      <nav>
        <a href="home.html" class="highlight-btn">Home</a>
      </nav>
    </header>

    <section class="hero-section">
      <h2>What Our Members Say</h2>
      <p>
        Discover how Royal Fitness has transformed lives and helped thousands
        achieve their fitness goals
      </p>
    </section>

    <section class="stats-section">
      <div class="stats-container">
        <div class="stat-item">
          <span class="stat-number">4.8</span>
          <div class="stat-label">Average Rating</div>
        </div>
        <div class="stat-item">
          <span class="stat-number">2,500+</span>
          <div class="stat-label">Happy Members</div>
        </div>
        <div class="stat-item">
          <span class="stat-number">98%</span>
          <div class="stat-label">Success Rate</div>
        </div>
        <div class="stat-item">
          <span class="stat-number">500+</span>
          <div class="stat-label">Reviews</div>
        </div>
      </div>
    </section>

    <section class="reviews-section">
      <h3>Recent Reviews</h3>
      <div class="reviews-grid"></div>
    </section>

    <section class="leave-review">
      <h3>Share Your Experience</h3>
      <p>
        We'd love to hear about your fitness journey with Royal Fitness. Your
        feedback helps us improve and inspires others to start their own
        transformation.
      </p>

      <form class="review-form">
        <div class="form-group">
          <label for="name">Full Name</label>
          <input type="text" id="name" name="name" required />
        </div>
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" id="email" name="email" required />
        </div>
        <div class="form-group">
          <label for="rating">Rating</label>
          <select id="rating" name="rating" required>
            <option value="">Select Rating</option>
            <option value="5">★★★★★ Excellent</option>
            <option value="4">★★★★☆ Very Good</option>
            <option value="3">★★★☆☆ Good</option>
            <option value="2">★★☆☆☆ Fair</option>
            <option value="1">★☆☆☆☆ Poor</option>
          </select>
        </div>
        <div class="form-group">
          <label for="service">Service Used</label>
          <select id="service" name="service" required>
            <option value="">Select Service</option>
            <option value="personal-training">Personal Training</option>
            <option value="online-workouts">Online Workout Plans</option>
            <option value="nutrition">Nutrition Guidance</option>
            <option value="yoga">Yoga & Meditation</option>
            <option value="group-classes">Group Fitness Classes</option>
            <option value="wellness">Wellness Coaching</option>
          </select>
        </div>
        <div class="form-group">
          <label for="review">Your Review</label>
          <textarea id="review" name="review" required></textarea>
        </div>
        <button type="submit" class="submit-btn">Submit Review</button>
      </form>
    </section>

    <footer>
      <div class="footer-content">
        <p>&copy; 2025 Fitzy Fitness. All Rights Reserved.</p>
      </div>
    </footer>

    <script>
      const reviewForm = document.querySelector(".review-form");
      const reviewsGrid = document.querySelector(".reviews-grid");

      function fetchReviews() {
        fetch("get_reviews.php")
          .then((res) => res.json())
          .then((reviews) => {
            reviewsGrid.innerHTML = "";
            reviews.forEach((r) => {
              const card = document.createElement("div");
              card.className = "review-card";
              card.innerHTML = `
                <div class="review-header">
                  <img src="photos/avatar_img.png" class="reviewer-img" alt="${
                    r.name
                  }">

                  <div class="reviewer-info">
                    <h4>${r.name}</h4>
                    <div class="rating">${"★".repeat(r.rating)}${"☆".repeat(
                5 - r.rating
              )}</div>
                  </div>
                </div>
                <p class="review-text">"${r.review}"</p>
              `;
              reviewsGrid.appendChild(card);
            });
          });
      }

      reviewForm.addEventListener("submit", function (e) {
        e.preventDefault();
        const formData = new FormData(this);

        fetch("review.php", {
          method: "POST",
          body: formData,
        })
          .then((res) => res.json())
          .then((data) => {
            alert(data.message);
            if (data.status === "success") {
              this.reset();
              fetchReviews(); // reload reviews
            }
          })
          .catch(() => alert("Submission failed. Try again."));
      });

      window.addEventListener("DOMContentLoaded", fetchReviews);
    </script>
  </body>
</html>
